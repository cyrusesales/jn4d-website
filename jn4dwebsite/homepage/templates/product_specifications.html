{% extends "base.html" %} 
{% block title %}JN4D Interior Services{% endblock %}
{% block content %}
<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
  rel="stylesheet"
/>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>



<svg xmlns="http://www.w3.org/2000/svg" style="display: none;" >
  <symbol id="price" viewBox="0 0 16 16" fill="currentColor">
    <path d="M3 2v4.586l7 7L14.586 9l-7-7zM2 2a1 1 0 0 1 1-1h4.586a1 1 0 0 1 .707.293l7 7a1 1 0 0 1 0 1.414l-4.586 4.586a1 1 0 0 1-1.414 0l-7-7A1 1 0 0 1 2 6.586z"/>
    <path d="M5.5 5a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1m0 1a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3M1 7.086a1 1 0 0 0 .293.707L8.75 15.25l-.043.043a1 1 0 0 1-1.414 0l-7-7A1 1 0 0 1 0 7.586V3a1 1 0 0 1 1-1z"/>    
  </symbol>
  <symbol id="cart" viewBox="0 0 16 16" fill="currentColor">
    <path d="M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5M3.14 5l.5 2H5V5zM6 5v2h2V5zm3 0v2h2V5zm3 0v2h1.36l.5-2zm1.11 3H12v2h.61zM11 8H9v2h2zM8 8H6v2h2zM5 8H3.89l.5 2H5zm0 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0m9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0"/>
  </symbol>
  <symbol id="favorite" viewBox="0 0 16 16" fill="currentColor">
    <path d="M4 1c2.21 0 4 1.755 4 3.92C8 2.755 9.79 1 12 1s4 1.755 4 3.92c0 3.263-3.234 4.414-7.608 9.608a.513.513 0 0 1-.784 0C3.234 9.334 0 8.183 0 4.92 0 2.755 1.79 1 4 1"/>
  </symbol>
  <symbol id="sale" viewBox="0 0 16 16" fill="currentColor">
    <path d="M3 4.5a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5M11.5 4a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1z"/>
  <path d="M2.354.646a.5.5 0 0 0-.801.13l-.5 1A.5.5 0 0 0 1 2v13H.5a.5.5 0 0 0 0 1h15a.5.5 0 0 0 0-1H15V2a.5.5 0 0 0-.053-.224l-.5-1a.5.5 0 0 0-.8-.13L13 1.293l-.646-.647a.5.5 0 0 0-.708 0L11 1.293l-.646-.647a.5.5 0 0 0-.708 0L9 1.293 8.354.646a.5.5 0 0 0-.708 0L7 1.293 6.354.646a.5.5 0 0 0-.708 0L5 1.293 4.354.646a.5.5 0 0 0-.708 0L3 1.293zm-.217 1.198.51.51a.5.5 0 0 0 .707 0L4 1.707l.646.647a.5.5 0 0 0 .708 0L6 1.707l.646.647a.5.5 0 0 0 .708 0L8 1.707l.646.647a.5.5 0 0 0 .708 0L10 1.707l.646.647a.5.5 0 0 0 .708 0L12 1.707l.646.647a.5.5 0 0 0 .708 0l.509-.51.137.274V15H2V2.118z"/>
  </symbol>
</svg>

<style>


    .carousel-wrapper {
        max-width: 550px;
        width: 100%;
        {% comment %} background: rgba(255, 255, 255, 0.95); {% endcomment %}
        border-radius: 20px;
        padding: 10px;
        {% comment %} box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); {% endcomment %}
    }

    .carousel-container {
        position: relative;
    }

    .main-image-container {
        position: relative;
        width: 100%;
        height: 600px;
        {% comment %} border-radius: 15px; {% endcomment %}
        {% comment %} overflow: hidden; {% endcomment %}
        {% comment %} background: #000; {% endcomment %}
        margin-bottom: 30px;
        {% comment %} box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); {% endcomment %}
    }

    .main-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: opacity 0.4s ease, transform 0.4s ease;
    }

    .main-image-container:hover .nav-button.prev{
        display: inline-block;
    }

    .main-image-container:hover .nav-button.next{
        display: inline-block;
    }

    .main-image.fade {
        opacity: 0;
        transform: scale(1.05);
    }

    {% comment %} .image-info {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(to top, rgba(0, 0, 0, 0.9), transparent);
        color: white;
        padding: 40px 30px 30px;
        transform: translateY(0);
        transition: transform 0.3s ease;
    }

    .image-title {
        font-size: 32px;
        font-weight: bold;
        margin-bottom: 8px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    }

    .image-description {
        font-size: 16px;
        opacity: 0.95;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    } {% endcomment %}

    .nav-button {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        border: none;
        color: #333;
        font-size: 28px;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.3s ease;
        z-index: 10;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    .nav-button:hover {
        background: white;
        transform: translateY(-50%) scale(1.1);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    }

    .nav-button:active {
        transform: translateY(-50%) scale(0.95);
    }

    .nav-button.prev {
        left: -30px;
        display: none;
    }

    .nav-button.next {
        right: -30px;
        display: none;
    }

    .thumbnails-wrapper {
        position: relative;
    }

    .thumbnails-container {
        display: flex;
        gap: 15px;
        overflow-x: auto;
        padding: 15px 5px;
        scroll-behavior: smooth;
        scrollbar-width: thin;
        scrollbar-color: #667eea #e0e0e0;
    }

    .thumbnails-container::-webkit-scrollbar {
        height: 10px;
    }

    .thumbnails-container::-webkit-scrollbar-track {
        background: #e0e0e0;
        border-radius: 5px;
    }

    .thumbnails-container::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 5px;
    }

    .thumbnail {
        flex-shrink: 0;
        width: 180px;
        height: 120px;
        border-radius: 10px;
        overflow: hidden;
        cursor: pointer;
        border: 4px solid transparent;
        transition: all 0.3s ease;
        position: relative;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    .thumbnail:hover {
        transform: translateY(-8px);
        border-color: #667eea;
        box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
    }

    .thumbnail.active {
        border-color: #764ba2;
        box-shadow: 0 8px 25px rgba(118, 75, 162, 0.6);
        transform: translateY(-5px);
    }

    .thumbnail img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease;
    }

    .thumbnail:hover img {
        transform: scale(1.1);
    }

    .thumbnail-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.4);
        opacity: 0;
        transition: opacity 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .thumbnail:hover .thumbnail-overlay {
        opacity: 1;
    }

    .thumbnail.active .thumbnail-overlay {
        opacity: 0;
    }

    .thumbnail-number {
        position: absolute;
        top: 8px;
        right: 8px;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        width: 28px;
        height: 28px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: bold;
    }

    .progress-bar {
        position: absolute;
        bottom: 0;
        left: 0;
        height: 4px;
        {% comment %} background: linear-gradient(90deg, #667eea 0%, #764ba2 100%); {% endcomment %}
        transition: width 0.3s ease;
        border-radius: 2px;
    }

    .counter {
        text-align: center;
        margin-top: 20px;
        font-size: 18px;
        color: #555;
        font-weight: 600;
    }

    @media (max-width: 768px) {
        .carousel-wrapper {
            padding: 20px;
        }

        .main-image-container {
            height: 400px;
        }

        .nav-button {
            width: 45px;
            height: 45px;
            font-size: 20px;
        }

        .nav-button.prev {
            left: 10px;
            visibility: hidden;
        }

        .nav-button.next {
            right: 10px;
            visibility: hidden;
        }

        .thumbnail {
            width: 140px;
            height: 95px;
        }

        .image-title {
            font-size: 24px;
        }

        .image-description {
            font-size: 14px;
        }
    }

    @media (max-width: 480px) {
        .main-image-container {
            height: 300px;
        }

        .thumbnail {
            width: 120px;
            height: 80px;
        }
    }
</style>


<div class="container" style="margin-top: 100px;">

    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url "homepage" %}">Home</a></li>
            <li class="breadcrumb-item"><a href="{% url "view-products" category.id %}">{{ category.name }}</a></li>
            <li class="breadcrumb-item"><a href="{% url "view-color-products" product.id %}">{{ product.name }}</a></li>
            <li class="breadcrumb-item active" aria-current="page">{{ colorProducts.colorName }}</li>
        </ol>
    </nav>

    <div class="row">
        
        <div class="col-md-12">
            <h2 class="mb-4">{{ colorProducts.colorName }}</h2>
            <p>{{ colorProducts.description}}</p>
            {% for msg in messages %}
                <div class="alert alert-success alert-dismissible d-flex align-items-center fade show" role="alert" >
                    <svg class="bi flex-shrink-0 me-2" role="img" aria-label="Success:" width="20" height="20" >
                        <use xlink:href="#check-circle-fill" />
                    </svg>
                    <div>{{ msg }}</div>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close" ></button>
                </div>
            {% endfor %}
            <div class="container text-center">
                <div class="row align-items-start">
                    <div class="col">


                        <!--Carousel-->
                        <div class="carousel-wrapper">
                            <div class="carousel-container">
                                <div class="main-image-container">
                                    <button class="nav-button prev" onclick="changeImage(-1)">‹</button>
                                    <img id="mainImage" class="main-image" src="" alt="">
                                    <div class="image-info">
                                        <div class="image-title" id="imageTitle"></div>
                                        <div class="image-description" id="imageDescription"></div>
                                    </div> 
                                    <button class="nav-button next" onclick="changeImage(1)">›</button>
                                    {% comment %} <div class="progress-bar" id="progressBar"></div> {% endcomment %}
                                </div>

                                <div class="thumbnails-wrapper">
                                    <div class="thumbnails-container" id="thumbnailsContainer"></div>
                                </div>

                                {% comment %} <div class="counter" id="counter"></div> {% endcomment %}
                            </div>
                        </div>

                    </div>

                    <div class="col">
                    One of three columns
                    <!--Carousel-->
                        
                    </div>
                </div>
            </div>



            <div class="row">
                
                

                
            </div>
        </div>
    </div>
</div>

<script>
const images = [
    {
        url: '{{ colorProducts.image.url }}',
        thumbnail: '{{ colorProducts.image.url }}',
    },
    {
        url: '{{ colorProducts.image1.url }}',
        thumbnail: '{{ colorProducts.image1.url }}',
    },
    {
        url: '{{ colorProducts.image2.url }}',
        thumbnail: '{{ colorProducts.image2.url }}',
    },
    {
        url: '{{ colorProducts.image3.url }}',
        thumbnail: '{{ colorProducts.image3.url }}',
    },
    {
        url: '{{ colorProducts.image4.url }}',
        thumbnail: '{{ colorProducts.image4.url }}',
    },
    
];

let currentIndex = 0;

function initCarousel() {
    const container = document.getElementById('thumbnailsContainer');
    
    images.forEach((image, index) => {
        const thumb = document.createElement('div');
        thumb.className = 'thumbnail';
        if (index === 0) thumb.classList.add('active');
        thumb.onclick = () => selectImage(index);
        
        thumb.innerHTML = `
            <img src="${image.thumbnail}" alt="${image.title}">
            <div class="thumbnail-overlay"></div>
            
        `;
        // <div class="thumbnail-number">${index + 1}</div>
        container.appendChild(thumb);
    });
    
    updateCarousel();
}

function selectImage(index) {
    currentIndex = index;
    updateCarousel();
}

function changeImage(direction) {
    currentIndex += direction;
    if (currentIndex < 0) currentIndex = images.length - 1;
    if (currentIndex >= images.length) currentIndex = 0;
    updateCarousel();
}

function updateCarousel() {
    const mainImage = document.getElementById('mainImage');
    const imageTitle = document.getElementById('imageTitle');
    const imageDescription = document.getElementById('imageDescription');
    const thumbnails = document.querySelectorAll('.thumbnail');
    const counter = document.getElementById('counter');
    const progressBar = document.getElementById('progressBar');

    mainImage.classList.add('fade');
    
    setTimeout(() => {
        mainImage.src = images[currentIndex].url;
        mainImage.alt = images[currentIndex].title;
        imageTitle.textContent = images[currentIndex].title;
        imageDescription.textContent = images[currentIndex].description;
        mainImage.classList.remove('fade');
    }, 200);

    thumbnails.forEach((thumb, index) => {
        thumb.classList.toggle('active', index === currentIndex);
    });

    const container = document.getElementById('thumbnailsContainer');
    const activeThumb = thumbnails[currentIndex];
    const scrollLeft = activeThumb.offsetLeft - (container.offsetWidth / 2) + (activeThumb.offsetWidth / 2);
    container.scrollTo({ left: scrollLeft, behavior: 'smooth' });

    counter.textContent = `${currentIndex + 1} / ${images.length}`;
    
    const progress = ((currentIndex + 1) / images.length) * 100;
    progressBar.style.width = `${progress}%`;
}

document.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowLeft') changeImage(-1);
    if (e.key === 'ArrowRight') changeImage(1);
});

let touchStartX = 0;
let touchEndX = 0;

document.getElementById('mainImage').addEventListener('touchstart', (e) => {
    touchStartX = e.changedTouches[0].screenX;
});

document.getElementById('mainImage').addEventListener('touchend', (e) => {
    touchEndX = e.changedTouches[0].screenX;
    handleSwipe();
});

function handleSwipe() {
    if (touchEndX < touchStartX - 50) changeImage(1);
    if (touchEndX > touchStartX + 50) changeImage(-1);
}

initCarousel();
</script>

{% endblock %}

